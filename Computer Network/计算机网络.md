### 第一章

#### 电路交换，分组交换和报文交换

1. 电路交换
   - **计算机之间的数据传送是突发式**的，当**使用电路交换**来传送计算机数据时，其**线路的传输效率一般都会很低**，线路上真正用来传送数据的时间往往不到10%甚至1%。
2. 分组交换
   - 优点
     - 没有建立连接和释放连接的过程
     - 分组传输过程中逐段占用通信链路，有较高的通信线路利用率
     - 交换节点可以为每一个分组独立选择转发路由，使得网络有很好的生存性
   - 缺点
     - 分组首部带来了额外的传输开销
     - 交换节点存储转发分组会照成一定的时延
     - 无法确保通信时端到端通信资源全部可用，在通信量较大时可能造成网络拥堵
     - 分组可能会出现失序和丢失等问题
3. 报文交换
   - 报文交换是分组交换的前身。在报文交换中，**报文被整个地发送**，而不是拆分成若干个分组进行发送。交换节点将**报文整体接收完成后**才能查找转发表，将整个报文转发到下一个节点。因此，报文交换比分组交换带来的**转发时延要长很多**，需要交换节点具有的**缓存空间也大很多**。
4. 三种交换方式的对比
   - **若要连续传送大量的数据，并且数据传送时间远大于建立连接的时间**，**则使用电路交换可以有较高的传输效率。**然而计算机的==**数据传送往往是突发式的**==，采用电路交换时通信线路的利用率会很低。
   - 报文交换和分组交换都==**不需要建立连接**==（即预先分配通信资源)，在传送计算机的**突发数据时可以提高通信线路的利用率。**
   - 将报文构造成若干个更小的分组进行分组交换，比将整个报文进行报文交换的时延要小，并且还可以避免太长的报文长时间占用链路，有利于差错控制，同时具有更好的灵活性。

#### 计算机网络的性能指标

1. 速率

   - | 数据量的单位 | 换算关系       |
     | ------------ | -------------- |
     | 比特(b)      | 基本单位       |
     | 字节(B)      | 1B=8bit        |
     | 千字节(KB)   | KB=2^10^ B     |
     | 兆字节(MB)   | MB=KKB=2^20^ B |
     | 吉字节(GB)   | GB=KMB=2^30^ B |
     | 太字节(TB)   | TB=KGB=2^40^ B |

   - 速率是指**数据的传送速率**，也成为数据率或比特率。基本单位为bit/s或bps。

   - | 速率的单位      | 换算关系              |
     | --------------- | --------------------- |
     | 比特/秒(b/s)    | 基本单位              |
     | 千比特/秒(kb/s) | kb/s=10^3^ b/s        |
     | 兆比特/秒(Mb/s) | Mb/s=k*kb/s=10^6^ b/s |
     | 吉比特/秒(Gb/s) |                       |
     | 太比特/秒(Tb/s) |                       |

2. 带宽

   - 带宽在模拟信号系统中的意义：某个信号所包含的各种不同频率成分所占据的**频率范围**

     - 单位：Hz（kHz，MHz，GHz）

   - 带宽在计算机网络中的意义：用来表示网络的**通信线路所能传送数据的能力**，即在单位时间内从网络中的某一点到另一点所能**通过的最高速据率**。

     - 单位：b/s（kb/s、Mb/s、Gb/s、Tb/s）

     - ==**数据传送速率**===min[主机接口速率，线路带宽，交换机或路由器的接口速率]

       

3. 吞吐量

   - 吞吐量是指在**单位时间内通过某个网络或接口的实际数据量**。吞吐量常被用于对实际网络的测量，以便获知到底有多少数据量通过了网络。
   - 吞吐量**受网络带宽的限制**。

4. 时延

   - 时延是指数据从网络的一端传送到另一端所耗费的时间，也称为延迟或迟延。数据可由一个或多个分组、甚至是一个比特构成。

   - ==**发送时延=数据帧长度(b)/发送速率(b/s)**== 

   - ==**传播时延=信道长度(m)/信号传播速率(m/s)**==

     

     - 自由空间：3.0*10 ^8^ m/s
     - 铜线：2.3*10 ^8^ m/s
     - 光纤：2.0*10 ^8^ m/s

   - 排队时延：不方便计算

   - 处理时延：不方便计算

5. **时延带宽积**

   - 时延带宽积是**传播时延**和**带宽**的乘积。链路的时延带宽积也称为**以比特为单位的链路长度**。

6. 往返时延

   - 往返时间（Round-Trip Time，RTT）是指从发送端发送数据分组开始，到发送端收到接收端发来的相应确认分组为止，总共耗费的时间。
   - **有效数据率=数据长度/发送时间+RTT**

7. 利用率

   - 链路利用率

     - 链路利用率是指某条链路有百分之几的时间是被利用的(即有数据通过)。
     - 完全空闲的链路的利用率为零。

   - 网路利用率

     - 网络利用率是指网络中所有链路的链路利用率的加权平均。
     - 根据排队论可知，**当某链路的利用率增大时，该链路引起的时延就会迅速增加**。
     - 当网络的通信量较少时，产生的时延并不大，但在网络通信量不断增大时，**分组在交换节点(路由器或交换机)中的排队时延会随之增大**，因此网络引起的时延就会增大。
     - 令**D ~0~ 表示网络空闲时的时延**，**D表示网络当前的时延**，那么在理想的假定条件下，可用下式来表示D，D ~0~ 和**网络利用率U**之间的关系。

     $$
     D = \frac{D ~0~}{1-U}
     $$

8. 丢包率

   - 丢包率是指在一定的时间范围内，传输过程中**丢失的分组数量**与**总分组数量的比率**。
     - 接口丢包率-
     - 网络丢包率
     - 路径丢包率
     - 链路丢包率
     - 节点丢包率
   - 分组丢失主要有以下两种情况:
     - 分组在传输过程中出现误码，被传输路径中的节点交换机（例如路由器）或目的主机检测出误码而丢弃。
     - 节点交换机根据丢弃策略主动丢弃分组。丢包率可以反映网络的拥塞情况。
     - 无拥塞时路径丢包率为0。
     - 轻度拥塞时路径丢包率为1%~4%。
     - 严重拥塞时路径丢包率为5%~15%。

#### 计算机网络体系结构

1. 三种计算机网络体系结构

   | OSI 参考模型/法律规定 | TCP/IP 参考模型/==事实==标准 | 原理参考模型/教学 | 协议         |
   | --------------------- | ---------------------------- | ----------------- | ------------ |
   | 应用层                |                              |                   | HTTP SMTP .. |
   | 表示层                |                              |                   |              |
   | 会话层                | 应用层                       | 应用层            |              |
   | 运输层                | 运输层                       | 运输层            | TCP UDP      |
   | 网络层                | 网络层                       | 网络层            | IP           |
   | 数据链路层            |                              | 数据链路层        |              |
   | 物理层                | 网络接口层                   | 物理层            |              |

   1. 物理层
      1. 采用什么传输媒体
      2. 采用什么物理接口
      3. 采用什么信号表示比特0和1
   2. 数据链路层
      1. 标识网络中各主机(**主机编址，例如MAC地址**)
      2. 从比特流中区分出地址和数据（**数据封装格式**)
      3. 协调各主机争用总线（**媒体接入控制**)
      4. 以太网交换机的实现（**自学习和转发帧**)
      5. 检测数据是否误码（**差错检测**)
      6. 检测数据是否误码（**差错检测**)
   3. 网络层
      1. 标识网络和网络中的各主机(**网络和主机共同编址，例如IP地址**)
      2. 路由器转发分组(**路由选择协议、路由表和转发表)**
   4. 运输层
      1. 进程之间基于网络的通信(**进程的标识**，例如端口号)
      2. 出现传输差错如何处理(**可靠传输和不可靠传输**)
   5. 应用层
      1. 通过应用进程间的交互来完成特定的网络应用
      2. 进行会话管理和数据表示

2. 计算机网络体系结构中的专用术语

   1. 实体
      - **实体**是指任何可发送或接收信息的**硬件**或**软件进程**。
      - **对等实体**是指通信双方**相同层次中的实体**。
   2. 协议
      - **协议**是控制两个对等实体在**“水平方向**”进行“**逻辑通信**”的**规则**的集合。
      - ==协议的**三要素**==：
        - **语法**：定义所交换信息的**格式**
        - **语义**：定义通信双方所要完成的**操作**
        - **同步**：定义通信双方的**时序关系**
   3. 服务
      - 在协议的控制下，**两个对等实体在水平方向的逻辑通信使得本层能够向上一层提供服务**。要实现本层协议，还需要使用下面一层所提供的服务。
      - 协议是“**水平**”的，而服务是“**垂直**”的。
      - 实体看得见下层提供的服务，但并不知道实现该对等层次之间传送的数据包称为该层的协议数据单元(Protocol Data Unit，PDU)。同一系统内层与层之间交换的数据包称为服务数据单元(Service Data Unit，SDU)。服务的具体协议。下层的协议对上层的实体是“**透明**”的。
      - 在同一系统中**相邻两层的实体交换信息的逻辑接口**称为**服务访问点SAP**，它被用于区分不同的服务类型。
      - 帧的“类型”字段、IP数据报的“协议”字段，TCP报文段或UDP用户数据报的“端口号”字段都是SAP。
      - 上层要使用下层所提供的服务，必须通过与下层**交换一些命令**，这些命令称为**服务原语**。
      - 对等层次之间传送的数据包称为该层的**协议数据单元**(Protocol Data Unit，**PDU**)。
      - 同一系统内层与层之间交换的数据包称为**服务数据单元**(Service Data Unit，**SDU**)。

### 物理层

1. 物理层要实现的功能：“**透明**“传输比特流。

#### 物理层的接口特性

- **机械特性**
  - 形状和尺寸
  - 引脚数目和排列
  - 固定和锁定装置
- **电气特性**
  - 信号电压的范围
  - 阻抗匹配的状况
  - 传输速率
  - 距离限制
- **功能特性**：规定接口电缆的各条信号线的作用
- **过程特性**：规定在信号线上传输比特流的一组操作过程，包括个信号的时序关系

#### 数据通讯的基础知识

1. 数据通讯系统的模型

   - 一个**数据通讯系统**可**划分为三大部分**
     - ==**源系统**==（发送端，发送方）
       - 源点
         - **源点设备产生要传输的数据**。源点又称为**源站**或**信源**。
       - 发送器
         - 通常**源点**生成的数字比特流要通过**发送器编码后**才能够在传输系统中进行传输。
           - 典型的发送器：调制器，调制解调器。
     - ==**传输系统**==（传输网络）
     - ==**目的系统**==（接收端，接收方）
       - 接收器
         - 接收**传输系统**传送过来的信号，并把它转化为能被目的设备处理的信息。
           - 典型的接收器：解调器
       - 终点
         - 终点设备**从接收器**获取传送来的数字比特流，然后把信息输出。
         - 终点又称为**目的站**或**信宿**。

   - 常用术语
     - 通信的目的是传送**消息**(message)。语音，文字，图形，视频等都是消息。
     - ==**数据**==是运送**消息**的实体。
     - **数据**是用特定方式表示的**信息**，通常是有意义的符号序列。
     - ==**信号**==则是**数据**的电气或电磁表现。
       - 根据信号中代表消息的参数的取值范围不同，**信号**可分为两大类：
         - **模拟信号**或**连续信号**：代表**消息的参数**取值是连续的。
         - **数字信号**或**离散信号**：代表**消息的参数**取值是离散的。
     - 在使用**时间域**（或简称为**时域**）的波形表示数字信号时，代表不同离散数值的基本波形就称为**码元**。


#### 有关信道的几个基本概念

1. **信道**：==**信道**==一般用都是同来表示向**某一方向**传输信息的媒体。因此，一条通讯电路往往包含一条发送信道和一条接收信道。

   - 从通信双方信息焦糊的方式来看，可以有以下三种基本方式：
     - ==**单向通道**==或**单工通信**：即**只能由一个方向的通信**而没有反方行的交互。例如：无线电广播。
     - ==**双向交替通信**==或**半双工通信**：即通信双方都可以**发送消息，但不能双方同时发送**。
     - ==**双向同时通信**==或**全双工通信**：即通信双方可以同时**发送和接收信息**。
   - 单向通信只需要一条信道，而双向交替通信或双向同时通信则需要两条信道。

2. 来自==**信源的信号**==常称为**基带信号**（即基本频带信号）。计算机输出的代表各种文字或图像文件的数据信号都属于**基带信号**。

   - 基带信号往往包含较多的的**低频分量**，甚至由**直流分量**，而许多信道**不能传输**这种低频分量或直流分量。为了解决这一问题，就必须对**基带信号**进行==**调制**==。
   - **调制**分为两大类。
     - 一类是仅仅对基带信号的**波形**进行变换，使它能够于信道的特性相适应。变换后的信号仍然是基带信号。这类调制称为==**基带调制**==。由于这种基带调制是把**数字信号转化**为另一种形式的数字信号，倾向于称为==**编码**==。
     - 另一类调制则需要使用**载波**进行调制，把**基带信号的频率范围**搬到较高的频率，**并转化为模拟信号**。
       - 经过**载波**调制后的信号称为==**带通信号**==。
       - 而使用**载波的调制**称为==**带通调制**==。

3. 常用的**编码**方式

   - **不归零制**：正电平代表1，负电平代表0
   - **归零制**：正脉冲代表1，负脉冲代表0
   - ==**曼彻斯特编码**==：位**周期中心**的**上跳变代表0**，为周期中心的下跳变代表1。==**也可反过来定义**==。
   - ==**差分曼彻斯特编码**==：在**每一位的中心处始终有跳变**。位**开始边界**有跳变代表0，而位开始边界没有跳变代表1。

4. 基本的**带通调制**方法

   <img style="width: 700px;height:300px" src="Image\带通调制.png ">

   - **调幅**：载波的**振幅**随基带数字信号而变化。如0和1分别对应着无载波或有载波输出。

   - **调频**：**载波**的**频率**随基带数字信号而变化。如0和1分别对应着频率f~1~和f~2~。

   - **调相**：载波的**初始相位**随着基带数字信号而变化。如0和1分别对应着相位0度和180度

   - **混合调制方法**：**载波的相位和振幅**可以结合起来一起调制，例如**正交振幅调制QAM**
     
     - 12种相位(QAM-16)
     
     - 每种相位有1或2种振幅可选
     
     - 可以调制出16种码元（波形），每种码元可以对应表示4个比特
     
     - 每个码元于4个比特的对应关系因该采用**格雷码**，即任意两个相邻的码元只有1个比特不同。
     
       <img style="width: 330px;height:200px" src="Image\格雷码.png ">

5. 信道的极限容量

   - **码元**传输的速率越高，**信号**传输的距离越远，**噪声干扰**越大或**传输媒体**质量越差，在接收端的波形失真就越严重。
   - **信道**能通过的**频率范围**是有限的且许多**高频分量**往往不能通过信道。如果信号中的高频分量在传输时受到衰减，接收端收到的波形前沿和后沿变得不那么陡峭了，每一个码元所占的时间界限也不再是很明确。这种现象**==码间串扰==**
   - **==奈氏准则==**：在**带宽为W(HZ)的低通信道中**，**若不考虑噪声的影响**，则==**码元传输**==的**最高速率是2W(码元/秒)**。
     - **传播速率超过此上限**，就会出现严重的码间串扰问题，使接收端对码元的判决（即识别）成为不可能。
     - ==码元传输速率又称为**波特率**，**调制速率**，**波形速率**或**符号速率**。==
     - **波特率**于**比特率**有一定的关系
       - 当一**个码元只携带1比特的信息量**时，波特率（码元/秒）于比特率（比特/秒）在数值上是相等的。
       - 当一**个码元只携带n比特的信息量**时，波特率（码元/秒）于比特率（比特/秒）在数值要乘以n
       - 每种**码元**可携带的**比特位数**为log~2~X

6. 信噪比

   - **信噪比**是**信号的平均功率**和**噪声的平均功率**之比，常记为S/N。常使用分贝(dB)作为**度量单位**
     - ==**信噪比(dB) = 10 log~10~(S/N) (dB)。**==
   - ==**香农公式**==：**信道的极限信息传输速率**C是：
     - ==**C = W log~2~(1+S/N) (bit/s)**==
     - W：信道的频率带宽（单位为Hz）

#### 物理层下面的传输媒体

1. 传输媒体的分类

   - **传输媒体**是计算机网络设备之间的物理通路，也称为**传输介质**或**传输媒介**。

   - 传输媒体并不包含在计算机网络体系结构中。

   - **导向型传输媒体**

     - 同轴电缆

       <img style="width: 1500px;height:100px" src="Image\同轴电缆.png ">

       - 基带同轴电缆(50Ω)：用于**数字传输**，在早期局域网中广泛使用。
       - 宽带同轴电缆(75Ω)：用于**模拟传输**，目前主要用于有线电视的入户线。

     - 双绞线

       - | 双绞线类别  | 带宽   | 线缆特点                  | 典型应用                    |
         | ----------- | ------ | ------------------------- | --------------------------- |
         | 3           | 16MHz  | 2对4芯双绞线              | 传统以太网10Mb/s；模拟电话  |
         | 4           | 20MHz  | 4对8芯双绞线              | 曾用于令牌局域网            |
         | 5           | 100MHz | 于4类相比增加了绞合度     | 传输速率不超过100Mb/s的应用 |
         | 5E（超5类） | 125MHz | 于5类相比衰减更小         | 传输速率不超过1Gb/s的应用   |
         | 6           | 250Mhz | 于5类相比改善了串扰等性能 | 传输速率高于1Gb/s的应用     |
         | 7           | 600Mhz | 使用屏蔽双绞线            | 传输速率高于10Gb/s的应用    |

       - **绞合的作用**

         - 减少相邻**导线间的电磁干扰**。
         - 抵御部分来**自外界的电磁干扰**。

     - 光纤

       - 光纤通信利用光脉冲在光纤中的传递来进行通信。由于可见光的频率非常高（约为10^8^MHz量级），因此一个光纤通信系统的**传输带宽远大于**目前其它各种传输媒体的带宽。

         <img style="width: 300px;height:100px" src="Image\光纤.png ">

         

         <img style="width: 400px;height:100px" src="Image\光纤折射.png ">

       - 当光从**高折射率**的媒体射向**低折射率**的媒体时，其**折射角大于入射角**。
       
       - 如果**入射角足够大**，就会**出现全反射**，即光碰到包层时，就会反射回纤芯。
       
         <img style="width: 300px;height:100px" src="Image\多模光纤.png ">
       
       - 只要**从纤芯中**射到**纤芯表面**的光线的**入射角大于某个临界角度**，就可以产生全反射。因此，存在在多条不同角度入射的光线在一条光纤中传输。
       
       - 若将**光纤的直径**减小到只有几个光波长的量级，则光纤就像一根波导那样，可使光线一直向前传输。
       
         <img style="width: 500px;height:100px" src="Image\单模光纤.png ">
       
       - 在光纤通信中，常用的三个光波波段的**中心波长**分别为：
       
         - 850nm	衰减较大，但其它特性较好
         - 1300nm      衰减较小
         - 1550nm      衰减较小
   
   - **非导向型传输媒体**(自由空间)
   
     - 无线电波，微波，红外线，大气激光，可见光。

#### 信道复用技术的基本原理

1. 复用就是在**一条传输媒体上同时传输多路用户的信号**。
   - 









